# Laravel Validator

## Laravel package that extends default laravel validator

**Installation**

```bash
composer require wamesk/laravel-validator
```

### Validator

Validator used by default in this package.
It works by chaining functions and getting response.
Response is generated by `wamesk/laravel-api-response` package functions.
To better understand how response works checkout documentation for response package [here](https://github.com/wamesk/laravel-api-response)

#### Validate function

This function is final function. Always last.
It requires data and rules for validation.
Documentation for rules [click here](https://laravel.com/docs/9.x/validation)

Usage example:

```php
$data = ['email' => 'example@gmail.com', 'password' => 'password'];

$validator = Validator::validate($data, [
    'email' => 'email|required|max:255',
    'password' => 'required|string'
]);
if ($validator) return $validator;
```

In case of validation error it will return

```json
{
    "data": null,
    "code": null,
    "errors": {
        "email": [
            "validation.required"
        ]
    },
    "message": null
}
```

#### Code function

This function is add internal code in response.
You can pass second parameter that changes prefix for message translation.

Usage example:

```php
$data = ['email' => 'example@gmail.com', 'password' => 'password'];

$validator = Validator::code('1.2')->validate($data, [
    'email' => 'email|required|max:255',
    'password' => 'required|string'
]);
if ($validator) return $validator;
```

In case of validation error it will return

```json
{
    "data": "1.2",
    "code": null,
    "errors": {
        "email": [
            "The email field is required"
        ]
    },
    "message": "api.1.2"
}
```

#### Messages function

This function adds custom response for validation.
You need to pass objects of which key is field, and it's validation.
As value, you pass your custom message as shown in example.

Usage example:

```php
$data = ['email' => 'example@gmail.com', 'password' => 'password'];

$validator = Validator::code('1.2')
    ->messages([
        'email.required' => 'Email is required'
    ])
    ->validate($data, [
        'email' => 'email|required|max:255',
        'password' => 'required|string'
    ]);
if ($validator) return $validator;
```

In case of validation error it will return

```json
{
    "data": "1.2",
    "code": null,
    "errors": {
        "email": [
            "Email is required"
        ]
    },
    "message": "api.1.2"
}
```

#### Status Code function

This function doesn't change response visually but changes status code of response.
Default status code is 400 *(Bad Request)*.
If you want to chain all functions it can look like this.
Status code is always integer.

```php
Validator::statusCode($statusCode)->code($code)->messages($messages)->validate($data, $rules);
```